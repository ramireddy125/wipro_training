package com.day_12_JDBC;
import java.sql.*;
import java.util.Scanner;

class Patients{
	String name;
	int age;
	String disease;
	String AdmissionDate;
	String doctor;
	
	 public Patients(String name, int age, String disease, String AdmissionDate, String doctorAssigned) {
	        this.name = name;
	        this.age = age;
	        this.disease = disease;
	        this.AdmissionDate = AdmissionDate;
	        this.doctor = doctorAssigned;
	    }
	
}

public class HospitalReg {

	public static void main(String[] args) throws SQLException {
		 Scanner sc = new Scanner(System.in);
		
		try {
			Class.forName("com.mysql.cj.jdbc.Driver");
			
			Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/wipro","root","Venkat1122@");

			System.out.println("connected sucessfully");
			
            Statement stmt = con.createStatement();
			
			String sql="CREATE TABLE IF NOT EXISTS HOSPATIENT("+"id INT PRIMARY KEY AUTO_INCREMENT,"
			             +"name VARCHAR(100), "+"age INT,"+" disease VARCHAR(100), "+"admissionDate DATE, "+"Doctor VARCHAR(100))";
			
			stmt.executeUpdate(sql);
			
			System.out.println("Table HosPatient is created");
			
			System.out.println("Enter patient Name:");
			String name = sc.nextLine();
			System.out.println("Enter patient age:");
			int age = sc.nextInt();
			sc.nextLine();
			System.out.println("Enter patient disease:");
			String disease = sc.nextLine();
			System.out.println("Enter patient appoitmentedate:");
			String AdmissionDate = sc.nextLine();
			System.out.println("Enter patient assigned doctor:");
			String doctor = sc.nextLine();
			
			Patients p = new Patients(name,age,disease, AdmissionDate,doctor);
			
			String insert = "INSERT INTO HOSPATIENT(name,age,disease, AdmissionDate, doctor) VALUES(?,?,?,?,?))";
			
			PreparedStatement pstmt = con.prepareStatement(insert);
			
			pstmt.setString(1,p.name);
			pstmt.setInt(1,p.age);
			pstmt.setString(1,p.disease);
			pstmt.setString(1,p.AdmissionDate);
			pstmt.setString(1,p.doctor);
			
			int re = pstmt.executeUpdate();
			
			
			con.close();
			
			
		} catch (ClassNotFoundException e) {
			e.printStackTrace();
		}
		
		

	}

}
