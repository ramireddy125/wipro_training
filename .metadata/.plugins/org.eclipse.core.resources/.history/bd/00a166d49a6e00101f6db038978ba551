package com.day_12;
import java.io.*;
import java.util.ArrayList;


class Patient implements Serializable //marker interface(means no methods or fields)
{
	int id;
	String name;
	String disease;
	int age;
	public Patient(int id, String name, String disease, int age)
	{
	this.id=id;
	this.name=name;
	this.disease=disease;
	this.age=age;
    }
 
	public String toString()
	{
		return id + " - "+ name + " - " + disease + " - " + age;
	}
}
public class Serilization_Ex
{
	public static void main(String[] args) throws ClassNotFoundException
	{
		
		ArrayList<Patient> patientList = new ArrayList<>();
        patientList.add(new Patient(1, "Ravi", "fever", 23));
        patientList.add(new Patient(2, "venkat", " cold", 25));
        
       String File_Path = "C:\\Users\\ponug\\Desktop\\fileHandling\\patient.dat";
		
		//save patient object to file
		try
		{
			ObjectOutputStream out= new ObjectOutputStream(new FileOutputStream(File_Path));
			out.writeObject(patientList);
			out.close();
			System.out.println("Patient saved.");
		}
		catch(IOException e)
		{
			System.out.println("Error writing file.");
		}
		try (ObjectInputStream in = new ObjectInputStream(new FileInputStream(File_Path))) {
            ArrayList<Patient> loadedPatients = (ArrayList<Patient>) in.readObject();
            System.out.println("\n Deserialized Patients:");
            for (Patient p : loadedPatients) {
                System.out.println(p);
            }
        } catch (IOException  e) {
            System.out.println(e.getMessage());
        }

 
		}
	}
	
 
 
 