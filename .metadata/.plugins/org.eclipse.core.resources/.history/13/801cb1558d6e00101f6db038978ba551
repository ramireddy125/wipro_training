package com.day_11;
import java.io.*;
import java.io.IOException;
import java.util.Scanner;

class Patient implements Serializable {
    String id;
    String name;
    String disease;
    int age;

    public Patient(String id, String name, String disease, int age) {
        this.id = id;
        this.name = name;
        this.disease = disease;
        this.age = age;
    }

    public String toString() {
        return "Patient ID: " + id + ", Name: " + name + ", Disease: " + disease + ", Age: " + age;
    }
}
public class FileHandling {

	
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		
		File file = new File("C:\\Users\\ponug\\Desktop\\fileHandling\\Patient.pdf");
		try {
			if(file.createNewFile()) {
				System.out.println("File created");
			}else {
				System.out.println("alredy exist");
			}
		}catch(IOException e) {
			System.out.println("error"+e.getMessage());
		}
		
		while(true) {
			System.out.println("\n--- Patient Records Menu ---");
            System.out.println("1. Add Patient");
            System.out.println("2. View Patients");
            System.out.println("3. Exit");
            System.out.print("Enter your choice: ");
            int ch= sc.nextInt();
            sc.nextLine();
            
            switch(ch) {
                case 1:
                System.out.print("Enter Patient ID: ");
                String id = sc.nextLine();
                System.out.print("Enter Patient Name: ");
                String name = sc.nextLine();
                System.out.print("Enter Disease: ");
                String disease = sc.nextLine();
                System.out.print("Enter Age: ");
                int age = sc.nextInt();
                sc.nextLine(); 
                
                try(BufferedWriter w = new BufferedWriter(new FileWriter(file, true))){
                	w.write(id + "," + name +","+ disease+","+ age);
                	 System.out.println("Patient saved.");
                }catch(IOException e) {
        			System.out.println("error"+e.getMessage());
        		}
                
                Patient p = new Patient(id, name, disease, age);
                try{
                	FileOutputStream fout = new FileOutputStream("C:\\Users\\ponug\\Desktop\\fileHandling\\Patient.txt");
                	ObjectOutputStream out = new ObjectOutputStream(fout);
                	out.writeObject(p);
                	out.close();
                	fout.close();
                }catch(Exception e) {
                	System.out.println(e.getMessage());
                }
                break;
                
                case 2:
                	 try(BufferedReader r = new BufferedReader(new FileReader(file))){
                		 String line;
                		 while((line=r.readLine())!=null) {
                			 System.out.println(line);
                		 }
                		 r.close();
                	 }catch(IOException e) {
             			System.out.println("error"+e.getMessage());
             		}
                     break;
               
                case 3:
                	System.out.println("Exiting...");
                	break;
               default :
            	   System.out.println("Invalid choice");
            	   
            	   sc.close();
            }
		}
	}

}
